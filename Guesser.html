<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>სიტყვების თამაში</title>
     <link rel="stylesheet" href="guesser.css">
     <script src="game.js" defer></script>


    
</head>
<body>

    <h1>მოგესალმებით სიტყვების თამაშში!</h1>

    <div class="header">

    <ol> 

        <p class="rules">თამაშის წესები: </p>

    <li>1.თამაშისთვის საჭიროა მინიმუმ 4 და მაქსიმუმ 8 მოთამაშე.</li>
    <li>2.გამოსაცნობია ჯამში 15 სიტყვა, აქედან 1 ბომბია, რომლის აფეთქების შემთხვევაშიც რაუნდი სრულდება.</li>
    <li>3.მოთამაშეები იყოფიან ორ ჯგუფად (წითლები და ლურჯები) და ცდილობენ გამოიცნონ რაც შეიძლება მეტი სიტყვა.</li>
    <li>4.სიტყვები იყოფა ლურჯ და წითელ კატეგორიებად (7/7), რომელიც მხოლოდ მოკარნახეთათვის არის ცნობილი.</li>
    <li>5.თითოეულ გუნდს ჰყავს ერთი მოკარნახე, რომლის მიზანიც ერთი სიტყვით რამდენიმე სიტყვის ასოციაციური დაკავშირება და დანარჩენებისთვის ახსნაა</li>
    <li> 6.მაგალითი: ხელოვნება 3. ციფრი ამ შემთხვევაში კარნახობს მოთამაშეებს თუ რამდენი სიტყვა უნდა დააკავშირონ ერთმანეთს</li>
    <li> 7.მიეკუთვნება თუ არა ლურჯ ან წითელ ჯგუფს მოცემული სიტყვა მხოლოდ მოკარნახისთვისაა ცნობილი.</li>
    <li>8.თუ შემთხვევით მოწინააღმდეგის სიტყვა გამოიცანით ქულაც მათ ეწერებათ.</li>
    <li>9.გუნდი, რომელიც სამ რაუნდში ორს მოიგებს გამარჯვებულია</li>

    </ol>

    </div>

     <H3>გისურვებთ წარმატებებს!</H3>


<div class="scoreboard">
    <div>წითლები: <span id="redScore">0</span></div>
    <div>ლურჯები: <span id="blueScore">0</span></div>
</div>

    <div class="container">

         <div class="word1">
            <p>random word 1</p>
         </div>
         <div class="word2">
            <p>random word 2</p>

         </div>
         <div class="word3">

            <p>random word 3</p>

         </div>

         <div class="word4">            
            <p>random word 4</p>
         </div>

         <div class="word5">
             <p>random word 5</p>
        </div>

         <div class="word6">
            <p>random word 6</p>
        </div>
         <div class="word7">            
            <p>random word 7</p>
         </div>
         <div class="word8">            
            <p>random word 8</p>
         </div>
         <div class="word9"> 
            <p>random word 9</p>
         </div>
         <div class="word10">           
             <p>random word 10</p>
         </div>
         <div class="word11">            
            <p>random word 11</p>
         </div>
         <div class="word12">
            <p>random word 12</p>
         </div>
         <div class="word13">
            <p>random word 13</p>
         </div>
         <div class="word14">            
            <p>random word 14</p>
         </div>
         <div class="word15">           
             <p>random word 15</p>
         </div>

    </div>

    <button id="shuffleButton">თავიდან დაწყება</button>

    <script>
        const words = ["ასტრონავტი", "ფლამინგო", "პირამიდა", "კლავიატურა", "სოკო", "ტელესკოპი", "ვულკანი", "თავსატეხი", "მარათონი", "ჟირაფი", "კარუსელი", "რვაფეხა", "ნაბიჯი" , "მზესუმზირა", "ბავშვი", "შუქურა", "სიმფონია", "ომი", "ტრომბონი", "რობოტი", "კაქტუსი", "ღუმელი", "მედუზა", "მოზაიკა", "ტორნადო", "თვითმფრინავი" ,"დრამი", "ფარშევანგი", "სკამი", "სასტვენი", "დელფინი", "ქანდაკება", "ლიფტი", "ხიდი", "ცისარტყელა", "მორევი", "კრისტალი", "კალეიდოსკოპი", "სტეტოსკოპი", "პინგვინი", "შადრევანი", "მანგო", "კიტრი", "არფა", "ბრილიანტი", "ამფიბია", "ჰამაკი", "გასაღები", "გვირილა", "მარმარილო", "სფინქსი", "ნოუთბუქი","დრონი", "ბუხარი", "ქოლგა" ,"პლაზმა", "აისბერგი", "თუთიყუში", "სანდალი", "რაკეტა", "ჯუნგლები", "ჰორიზონტი", "წყალქვეშა ნავი", "მაიამი","ტანგო","ფარანი","სკეიტბორდი", "ტრიუმფი", "ესპრესო", "საიდუმლო", "ჭაღი", "მეტეორი", "ბალიშა", "ბილეთი", "მყინვარი", "ზღვის ცხენი", "ორქიდეა", "ლეპტოპი", "კიბე", "სამზარეულო", "ცათამბჯენი", "ვეშაპი", "ქურთუკი", "სასტვენი", "კანიონი","ველოსიპედი", "ფეიერვერკი", "რვაკვერდკა", "ხალიჩა", "ვაზა", "პანდა", "ღრუბელი"];

// Get all the divs inside the grid container
const divs = document.querySelectorAll('.container div');
const redScoreElement = document.getElementById('redScore');
const blueScoreElement = document.getElementById('blueScore');

let redScore = 0;
let blueScore = 0;
let gameEnded = false;

// Function to shuffle an array
function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}

// Function to assign words and teams to divs
function assignWordsAndTeams() {
    if (gameEnded) return; // Prevent reassigning if game has ended

    shuffle(words);

    // Create an array with 7 "blue", 7 "red", and 1 "bomb"
    let teams = ["blue", "blue", "blue", "blue", "blue", "blue", "blue",
                 "red", "red", "red", "red", "red", "red", "red",
                 "bomb"];

    shuffle(teams); // Shuffle the teams array

    // Assign each div a word and a team color
    divs.forEach((div, index) => {
        div.textContent = words[index]; // Assign a word
        div.dataset.team = teams[index]; // Store the team in a data attribute
        div.dataset.clicked = 'false'; // Initialize the clicked state

        // Remove any previous classes, but do not apply the color yet
        div.classList.remove('clicked-blue', 'clicked-red', 'clicked-bomb');
        div.style.backgroundColor = ''; // Reset background color
        div.style.color = ''; // Reset text color
        div.style.fontSize = ''; // Reset font size
    });
}

// Function to handle click on a div
function revealTeam(event) {
    if (gameEnded) return; // Prevent further clicks if game has ended

    const div = event.target;
    const team = div.dataset.team;

    // Check if the div has already been clicked
    if (div.dataset.clicked === 'true') {
        return; // Exit if already clicked
    }

    // Set the clicked state
    div.dataset.clicked = 'true';

    // Increment the score based on the team
    if (team === "blue") {
        blueScore++;
        blueScoreElement.textContent = blueScore;
        div.classList.add('clicked-blue'); // Apply clicked color for blue
        div.style.backgroundColor = 'skyblue'; // Set background color
    } else if (team === "red") {
        redScore++;
        redScoreElement.textContent = redScore;
        div.classList.add('clicked-red'); // Apply clicked color for red
        div.style.backgroundColor = 'pink'; // Set background color
    } else if (team === "bomb") {
        endGame("Bomb hit! Game over.");
        div.classList.add('clicked-bomb'); // Apply clicked color for bomb
        div.style.backgroundColor = 'orange'; // Set background color
        return; // End the function here if bomb is clicked
    }

    // Check for win condition
    if (redScore === 7) {
        endGame("Team Red wins!");
    } else if (blueScore === 7) {
        endGame("Team Blue wins!");
    }
}

// Function to end the game
function endGame(message) {
    gameEnded = true;
    alert(message); // Show game over message
}

// Function to reset the game
function resetGame() {
    gameEnded = false;
    redScore = 0;
    blueScore = 0;
    redScoreElement.textContent = redScore;
    blueScoreElement.textContent = blueScore;
    assignWordsAndTeams();
}

// Assign words and teams initially
assignWordsAndTeams();

// Add event listener to each div to reveal its team on click
divs.forEach(div => {
    div.addEventListener('click', revealTeam);
});

// Add event listener to the shuffle button
document.getElementById('shuffleButton').addEventListener('click', assignWordsAndTeams);

// Add event listener to the reset button
document.getElementById('resetButton').addEventListener('click', resetGame);

// Retrieve and use saved game data
const gameData = JSON.parse(localStorage.getItem('gameData'));

if (gameData) {
    const container = document.querySelector('.container');

    // Clear current divs before populating with saved data
    container.innerHTML = '';

    // Use the game data to populate the divs
    gameData.forEach((data) => {
        const div = document.createElement('div');
        div.textContent = data.word;
        div.dataset.team = data.team;
        div.dataset.clicked = 'false';

        // Add any necessary attributes or event listeners
        div.addEventListener('click', function() {
            // Handle the click event based on team
            if (div.dataset.clicked === 'true') return;

            div.dataset.clicked = 'true';
            if (data.team === 'blue') {
                div.style.backgroundColor = 'skyblue';
            } else if (data.team === 'red') {
                div.style.backgroundColor = 'pink';
            } else if (data.team === 'bomb') {
                div.style.backgroundColor = 'orange';
                alert("Bomb hit! Game over.");
            }
        });

        // Append the div to the container
        container.appendChild(div);
    });
} else {
    alert('No game data found! Please start the game from the explainer page.');
}

        
        </script>
    
</body>
</html>